# HL7 v2.3 ADT_A28 Message Template
# Generated from official HL7 XSD schema
# Auto-generated on Fri Dec 26 16:06:41 CST 2025

resourceType: Bundle
id:
  type: STRING
  valueOf: "GeneralUtils.generateResourceId()"
  expressionType: JEXL
type: collection

entry:
  - fullUrl:
      type: STRING
      valueOf: "GeneralUtils.generateFullUrl(\"MessageHeader\" , MessageHeader.id)"
      expressionType: JEXL
    resource:
      valueOf: resource/MessageHeader
      expressionType: resource

  - fullUrl:
      type: STRING
      valueOf: "GeneralUtils.generateFullUrl(\"Patient\" , Patient.id)"
      expressionType: JEXL
    resource:
      valueOf: datatype/Patient
      expressionType: resource

resources:
  # Patient Demographics
  - resourceName: Patient
    segment: PID
    resourcePath: resource/Patient
    repeats: false
    additionalSegments:
      - MSH

  # Patient Visit/Encounter
  - resourceName: Encounter
    segment: PV1
    resourcePath: resource/Encounter
    repeats: false
    additionalSegments:
      - MSH
      - PV2
      - ACC

  # Next of Kin / Emergency Contact
  - resourceName: RelatedPerson
    segment: NK1
    resourcePath: resource/RelatedPerson_NK1
    repeats: true
    additionalSegments:
      - MSH

  # Allergy Information
  - resourceName: AllergyIntolerance
    segment: AL1
    resourcePath: resource/AllergyIntolerance
    repeats: true
    additionalSegments:
      - MSH

  # Diagnosis Information
  - resourceName: Condition
    segment: DG1
    resourcePath: resource/Condition
    repeats: true
    additionalSegments:
      - MSH

  # Procedures
  - resourceName: Procedure
    segment: PR1
    resourcePath: resource/Procedure
    repeats: true
    additionalSegments:
      - MSH

  # Observation/Result
  - resourceName: Observation
    segment: OBX
    resourcePath: resource/Observation
    repeats: true
    additionalSegments:
      - MSH

  # Guarantor (Financial Responsibility)
  - resourceName: RelatedPerson
    segment: GT1
    resourcePath: resource/RelatedPerson_GT1
    repeats: true
    additionalSegments:
      - MSH

  # Group: INSURANCE
  # TODO: Implement group handling for INSURANCE
  # Segments in group: IN1 IN2 IN3 

